<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx" width="500" height="100%"
		 fontSize="16" xmlns:vo="com.threecoder.callcenter.model.vo.*">
	<fx:Script>
		<![CDATA[
			import com.threecoder.callcenter.model.vo.StaffItemVO;
			import com.threecoder.callcenter.model.vo.StaffVO;
			import com.threecoder.callcenter.view.event.AppEvent;
			
			import mx.collections.ArrayCollection;
			import mx.events.ListEvent;
			
			import spark.events.TextOperationEvent;
			
			public function clickHanlder(obj:Object):void{  
				
			}
			
			public function set searchResult( ac :ArrayCollection ) :void {
				dg.dataProvider = ac;
			}
			
			private function onSearch(event:TextOperationEvent):void
			{
				// TODO Auto-generated method stub
				var appEvent :AppEvent = new AppEvent( AppEvent.SEARCH_STAFF, true, true );
				appEvent.data = textInput.text;
				dispatchEvent( appEvent );
			}
			
			private function onItemClick( event :ListEvent ) :void {
				var staffVO :StaffVO = dg.selectedItem as StaffVO;
				if( !staffVO ) {
					return;
				}
				
				var appEvent :AppEvent = new AppEvent( AppEvent.SELECT_STAFF );
				appEvent.data = staffVO;
				dispatchEvent( appEvent );
			}
			
		]]>
	</fx:Script>
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	<s:Label text="备勤人员：" y="10"/>
	<s:TextInput id="textInput" x="120" y="6" width="80"  change="onSearch(event)"/>
	
	<mx:DataGrid y="40" id="dg" width="500" height="100%" itemClick="onItemClick(event);">
		<mx:columns>
			<mx:DataGridColumn dataField="name" headerText="姓名" textAlign="center" width="80"/>
			<mx:DataGridColumn dataField="callNumber" headerText="呼机号" textAlign="center" width="130"/>
			<mx:DataGridColumn dataField="department" headerText="部门" textAlign="center" width="80"/>
			<mx:DataGridColumn dataField="state" headerText="状态" textAlign="center" width="54"/>
		</mx:columns>
	</mx:DataGrid>
</s:Group>
